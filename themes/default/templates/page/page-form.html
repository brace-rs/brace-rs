{% extends "layout" %}

{% block head %}
  {{ super() }}
  <link rel="stylesheet" href="/static/resources/default/css/theme.css" />
  <link rel="stylesheet" href="/static/resources/default/css/form.css" />
{% endblock head %}

{% block content %}
  {{ super() }}
  <form method="post">
    <div class="fields">
      <div class="field field--hidden">
        <input type="hidden" name="id" class="input input--hidden" value="{{ page.id }}" />
      </div>
      <div class="field field--text">
        <label for="page-title" class="label">Title</label>
        <input type="text" id="page-title" name="title" class="input input--text input--required" value="{{ page.title }}" required="true" />
        <span class="description">
          The title of the page.
        </span>
      </div>
      <div class="field field--text">
        <label for="page-slug" class="label">Slug</label>
        <input type="text" id="page-slug" name="slug" class="input input--text" value="{{ page.slug }}" />
        <span class="description">
          The page slug.
        </span>
      </div>
      <div class="field field--textarea">
        <label for="page-description" class="label">Description</label>
        <textarea id="page-description" name="description" class="input input--textarea">{{ page.description }}</textarea>
        <span class="description">
          The description of the page.
        </span>
      </div>
      {% if pages %}
      <div class="field field--select">
        <label for="page-parent" class="label">Parent</label>
        <select id="page-parent" name="parent" class="input input--select">
          <option value="">- None -</option>
          {% for pageopt in pages %}
            {% if pageopt.id == page.id %}
            {% elif pageopt.id == page.parent %}
              <option value="{{ pageopt.id }}" selected="true">{{ pageopt.title }} - {{ pageopt.path }}</option>
            {% else %}
              <option value="{{ pageopt.id }}">{{ pageopt.title }} - {{ pageopt.path }}</option>
            {% endif %}
          {% endfor %}
        </select>
        <span class="description">
          The parent page.
        </span>
      </div>
      {% endif %}
      <div class="field field--datetime">
        <label for="page-created" class="label">Created</label>
        <input type="datetime-local" id="page-created" name="created" class="input input--datetime" value="{{ page.created }}" pattern="[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}" />
        <span class="description">
          The date/time of when the page was first created.
        </span>
      </div>
      <div class="field field--datetime">
        <label for="page-updated" class="label">Updated</label>
        <input type="datetime-local" id="page-updated" name="updated" class="input input--datetime" value="{{ now() | date(format="%Y-%m-%dT%H:%M") }}" pattern="[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}" />
        <span class="description">
          The date/time of when the page was last updated.
        </span>
      </div>
    </div>
    <div class="actions">
      <button type="submit" class="button button--primary">Submit</button>
      <a href="/pages/" class="button">Cancel</a>
    </div>
  </form>
{% endblock content %}
